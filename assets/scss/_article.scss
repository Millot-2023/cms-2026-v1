/* ==========================================================================
   _ARTICLE.SCSS - CARDS : 4 COL (DESKTOP) / 2 COL (TABLET) / 1 COL (MOBILE)
   ========================================================================== */
@use "variables" as *;

* { box-sizing: border-box; }

// --------------------------------------------------------------------------
// 1. RYTHME ÉDITORIAL (Préservé)
// --------------------------------------------------------------------------
p, ul, ol {
    margin-bottom: $space-between-paragraphs;
    line-height: $line-height-base;
    font-size: $font-size-p;
    color: #333;
}

li {
    margin-bottom: 0.4rem;
    line-height: $line-height-base;
    p { margin-bottom: 0; }
    &:last-child { margin-bottom: 0; }
}

h1, h2, h3 {
    margin-top: 1.5rem;
    margin-bottom: $space-between-paragraphs;
    line-height: 1.2;
    color: $black-sidebar;
}

h1:first-child, h2:first-child, h3:first-child { margin-top: 0; }

.bloc-image {
    margin-bottom: $space-between-paragraphs;
    width: 100%;
    figure {
        margin: 0;
        img { width: 100%; height: auto; border-radius: 2px; }
    }
}

// --------------------------------------------------------------------------
// 2. SYSTÈME DE CARDS (L'Exposition sur l'Index)
// --------------------------------------------------------------------------
.grid-container {
    display: grid !important;
    gap: 2rem;
    padding: 2rem 0;
    width: 100%;
    align-items: start;

    grid-template-columns: repeat(4, 1fr);

    @media (max-width: 1100px) {
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
    }

    @media (max-width: 650px) {
        grid-template-columns: 1fr;
    }
}

.grid-block {
    background: #fff;
    border-radius: 20px;
    display: flex !important;
    flex-direction: column;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: 1px solid #f0f0f0;
    height: 100%; 
    width: 100% !important;

    // ANTI-VIBRATION : Prépare le moteur de rendu
    backface-visibility: hidden;
    transform: translateZ(0);

    &:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.08);
    }

    .card-image {
        aspect-ratio: 16 / 10;
        width: 100%;
        background: #f7f7f7; 
        overflow: hidden;
        
        img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
            display: block;
        }
    }

    .card-content {
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        flex-grow: 1;

        .card-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            .category { font-size: 0.7rem; font-weight: 800; color: #888; text-transform: uppercase; }
            .date { font-size: 0.75rem; color: #bbb; }
        }

        h3 { font-size: 1.1rem; margin: 0 0 1rem 0; line-height: 1.3; color: $black-sidebar; }
        
        .summary { 
            font-size: 0.85rem; 
            color: #666; 
            margin-bottom: 1.5rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-height: 1.5;
            // On fixe la hauteur pour éviter que la carte ne change de taille selon le texte
            min-height: 4.5em; 
        }

        .card-action {
            margin-top: auto;
            display: flex;
            justify-content: center;
            .btn-open {
                background: #f2f2f2;
                padding: 0.7rem 1.8rem;
                border-radius: 50px;
                font-size: 0.75rem;
                font-weight: 700;
                text-decoration: none;
                color: #333;
                transition: background 0.2s;
                &:hover { background: #e5e5e5; }
            }
        }
    }
}

// --------------------------------------------------------------------------
// 3. MODE ARTICLE (Affichage plein fer)
// --------------------------------------------------------------------------
.single-article {
    .grid-container { 
        display: block !important; 
    }
    .grid-block {
        border-radius: 0;
        border: none;
        max-width: 900px;
        margin: 0 auto !important;
        &:hover { transform: none; box-shadow: none; }
        .card-image { aspect-ratio: auto; height: auto; max-height: 500px; }
        .card-action { display: none; }
    }
}